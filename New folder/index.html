<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sunrise Restaurant ‚Äì Menu & River Info</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --navy: #003366;
      --white: #ffffff;
      --light-gray: #f1f1f1;
      --mid-gray: #cccccc;
      --accent: #ff9f1c;
      --special-accent: #ffcc00;
      --card-bg: #ffffffcc;
      --card-white: #ffffff;
      --text-muted: #666666;
      --border-light: #e2e8f0;
      --light-bg: #f8fafc;
      font-family: 'Inter', sans-serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      background: var(--light-gray);
      overflow: hidden;
    }
    
    /* Hide sections by default */
    #menuSection,
    #dashboardSection {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }
    
    /* Show active section */
    #menuSection.active,
    #dashboardSection.active {
      opacity: 1;
      visibility: visible;
      z-index: 10;
    }
    
    .dashboard {
      width: 1100px;
      max-width: 100%;
      max-height: 100%;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 20px 50px rgba(0,0,0,0.1);
      background: var(--white);
      display: flex;
      flex-direction: column;
    }

    .header {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      align-items: center;
      padding: 12px 20px;
      gap: 20px;
    }
    
    .brand {
      display: flex;
      justify-content: flex-start;
    }
    
    .logo {
      width: 100px;
      height: 100px;
    }
    
    .logo img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    
    .brand-text {
      text-align: center;
    }
    
    .brand-text h1 {
      margin: 0;
      font-size: 20px;
      color: var(--navy);
      font-weight: 700;
    }
    
    .brand-text p {
      margin: 2px 0 0 0;
      font-size: 13px;
      color: var(--text-muted);
    }

    .clock {
      text-align: right;
      justify-self: end;
    }
    
    .time {
      font-size: 18px;
      font-weight: 600;
      color: var(--navy);
    }
    .date {
      font-size: 10px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    /* Menu styling */
    .menu-content {
      padding: 8px 20px 12px 20px;
      overflow-y: hidden;
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .menu-header {
      text-align: center;
      margin-bottom: 16px;
    }
    .menu-title {
      font-size: 26px;
      font-weight: 700;
      color: var(--navy);
      margin-bottom: 4px;
    }
    .menu-subtitle {
      font-size: 14px;
      color: var(--text-muted);
      font-weight: 500;
    }
    .menu-grid {
      display: flex;
      flex-direction: column;
      flex: 1;
      justify-content: space-evenly;
    }
    .menu-item {
      background: var(--card-bg);
      border: 1px solid var(--mid-gray);
      border-radius: 8px;
      padding: 10px 14px;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .menu-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    }

    .menu-item .item-name {
      font-weight: 600;
      font-size: 16px;
      color: var(--navy);
    }
    .menu-item .item-desc {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 2px;
      line-height: 1.3;
    }
    .menu-item .item-price {
      font-weight: 700;
      color: var(--accent);
      font-size: 16px;
      flex-shrink: 0;
      margin-left: 12px;
    }

    .menu-item.special {
      border-left: 5px solid var(--special-accent);
    }
    
    .menu-item.dessert-item {
      justify-content: center;
      text-align: center;
      background: linear-gradient(135deg, #fff8e1 0%, #ffe0b2 100%);
      border: 2px solid var(--special-accent);
    }
    
    .menu-item.dessert-item .item-content {
      width: 100%;
    }
    
    .menu-item.dessert-item .item-name {
      font-size: 18px;
    }

    /* Dashboard Section */
    .dashboard-content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 20px;
    }

    .left-panel {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .river-card {
      background: var(--card-white);
      border: 2px solid var(--border-light);
      border-radius: 20px;
      padding: 24px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.06);
    }

    .river-header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--border-light);
    }

    .river-icon {
      width: 60px;
      height: 60px;
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
      flex-shrink: 0;
    }

    .river-title {
      font-size: 24px;
      font-weight: 800;
      color: var(--navy);
    }

    .metrics {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }

    .metric {
      background: var(--light-bg);
      padding: 16px;
      border-radius: 12px;
      border: 1px solid var(--border-light);
    }

    .metric .label {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 8px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .metric .value {
      font-weight: 800;
      font-size: 24px;
      color: var(--navy);
    }

    .conditions {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }

    .cond-card {
      background: var(--card-white);
      border: 2px solid var(--border-light);
      padding: 20px;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }

    .cond-emoji {
      font-size: 40px;
      margin-bottom: 12px;
    }

    .cond-title {
      font-weight: 800;
      font-size: 16px;
      color: var(--navy);
      margin-bottom: 8px;
    }

    .cond-desc {
      font-size: 14px;
      color: var(--text-muted);
      font-weight: 600;
    }

    .right-panel {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .tips-card {
      background: var(--card-white);
      border: 2px solid var(--border-light);
      padding: 24px;
      border-radius: 20px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.06);
      flex: 1;
    }

    .tips-card h3 {
      font-size: 20px;
      color: var(--navy);
      margin: 0 0 20px 0;
      font-weight: 800;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--border-light);
    }

    .tip-item {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 16px 0;
      border-top: 1px dashed var(--border-light);
    }

    .tip-item:first-of-type {
      border-top: none;
      padding-top: 0;
    }

    .tip-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      background: var(--light-bg);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      flex-shrink: 0;
      border: 1px solid var(--border-light);
    }

    .tip-content .tip-title {
      font-weight: 800;
      font-size: 16px;
      color: var(--navy);
      margin-bottom: 4px;
    }

    .tip-content .tip-text {
      font-size: 14px;
      color: var(--text-muted);
      line-height: 1.4;
      font-weight: 500;
    }

    .footer {
      padding: 12px 20px;
      border-top: 3px solid var(--border-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--white);
      flex-shrink: 0;
    }

    .footer-text {
      font-size: 13px;
      color: var(--text-muted);
      font-weight: 600;
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 10px;
    }

    ::-webkit-scrollbar-track {
      background: var(--light-bg);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border-light);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #cbd5e0;
    }
  </style>
</head>

<body>
  <!-- Menu Section -->
  <div id="menuSection" class="active">
    <div class="dashboard">
      <div class="header">
        <div class="brand">
          <div class="logo"><img src="Wordmark Logo.svg" alt="Sunrise Restaurant Logo" /></div>
        </div>
        <div class="brand-text">
          <h1>Today's Specials</h1>
          <p>Freshly Prepared Daily</p>
        </div>
        <div class="clock">
          <div class="time" id="timeMenu">--:--</div>
          <div class="date" id="dateMenu">Loading...</div>
        </div>
      </div>

      <div class="menu-content">
        <div class="menu-grid">
          <div class="menu-item">
            <div class="item-content">
              <div class="item-name">Alaskan Waffle</div>
              <div class="item-desc">Layered with glazed strawberries, vanilla ice cream & topped with whipped cream</div>
            </div>
            <div class="item-price">$13.99</div>
          </div>

          <div class="menu-item">
            <div class="item-content">
              <div class="item-name">Sweet & Sour Chicken</div>
              <div class="item-desc">Tender chicken in sweet & sour sauce, served with rice</div>
            </div>
            <div class="item-price">$13.99</div>
          </div>

          <div class="menu-item">
            <div class="item-content">
              <div class="item-name">Quesadilla</div>
              <div class="item-desc">Choice of Steak or Chicken with melted cheese</div>
            </div>
            <div class="item-price">$12.99</div>
          </div>

          <div class="menu-item">
            <div class="item-content">
              <div class="item-name">Chicken Liver & Onions</div>
              <div class="item-desc">Perfectly seasoned, served with 2 sides</div>
            </div>
            <div class="item-price">$12.99</div>
          </div>

          <div class="menu-item special">
            <div class="item-content">
              <div class="item-name">Beer Battered Fish (Friday Only)</div>
              <div class="item-desc">2 golden fillets served with 2 sides ‚Ä¢ Fish varies based on availability</div>
            </div>
            <div class="item-price">$15.99</div>
          </div>

          <div class="menu-item dessert-item">
            <div class="item-content">
              <div class="item-name">ü•ß Try our Pumpkin Pie</div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <div class="footer-text">Switching to River Dashboard in <span id="countdown">2:00</span></div>
        <div class="footer-text">Made with ‚ù§Ô∏è by Sunrise Family Restaurant</div>
      </div>
    </div>
  </div>

  <!-- Dashboard Section -->
  <div id="dashboardSection">
    <div class="dashboard">
      <div class="header">
        <div class="brand">
          <div class="logo"><img src="sunrise_drawing.svg" alt="Logo" /></div>
          <div class="brand-text">
            <h1>Roaring River State Park</h1>
            <p>Live River Conditions</p>
          </div>
        </div>
        <div class="clock">
          <div class="time" id="timeDash">--:--</div>
          <div class="date" id="dateDash">Loading...</div>
        </div>
      </div>

      <div class="dashboard-content">
        <div class="left-panel">
          <div class="river-card">
            <div class="river-header">
              <div class="river-icon">üåä</div>
              <div class="river-title">Current River Data</div>
            </div>
            <div class="metrics">
              <div class="metric">
                <div class="label">Air Temp</div>
                <div class="value" id="airTemp">--¬∞F</div>
              </div>
              <div class="metric">
                <div class="label">Water Level</div>
                <div class="value" id="waterLevel">-- ft</div>
              </div>
              <div class="metric">
                <div class="label">Flow Rate</div>
                <div class="value" id="discharge">-- cfs</div>
              </div>
              <div class="metric">
                <div class="label">Sunrise</div>
                <div class="value" id="sunrise">--:--</div>
              </div>
              <div class="metric">
                <div class="label">Sunset</div>
                <div class="value" id="sunset">--:--</div>
              </div>
              <div class="metric">
                <div class="label">Last Update</div>
                <div class="value" id="lastUpdate">--:--</div>
              </div>
            </div>
          </div>

          <div class="conditions">
            <div class="cond-card">
              <div class="cond-emoji" id="fishEmoji">üé£</div>
              <div class="cond-title" id="fishTitle">Fishing</div>
              <div class="cond-desc" id="fishDesc">Loading...</div>
            </div>

            <div class="cond-card">
              <div class="cond-emoji" id="swimEmoji">üèä</div>
              <div class="cond-title" id="swimTitle">Swimming</div>
              <div class="cond-desc" id="swimDesc">Loading...</div>
            </div>

            <div class="cond-card">
              <div class="cond-emoji" id="paddleEmoji">üõ∂</div>
              <div class="cond-title" id="paddleTitle">Kayaking</div>
              <div class="cond-desc" id="paddleDesc">Loading...</div>
            </div>
          </div>
        </div>

        <div class="right-panel">
          <div class="tips-card">
            <h3>Quick Tips</h3>
            <div class="tip-item">
              <div class="tip-icon">üé£</div>
              <div class="tip-content">
                <div class="tip-title">Best Fishing</div>
                <div class="tip-text">Trout are most active at steady flows between 50-65¬∞F</div>
              </div>
            </div>
            <div class="tip-item">
              <div class="tip-icon">üèïÔ∏è</div>
              <div class="tip-content">
                <div class="tip-title">Park Information</div>
                <div class="tip-text">Visit center for trail maps and hatchery tour updates</div>
              </div>
            </div>
            <div class="tip-item">
              <div class="tip-icon">‚ö†Ô∏è</div>
              <div class="tip-content">
                <div class="tip-title">Safety First</div>
                <div class="tip-text">High flows mean no swimming and avoid low bridges</div>
              </div>
            </div>
            <div class="tip-item">
              <div class="tip-icon">üçΩÔ∏è</div>
              <div class="tip-content">
                <div class="tip-title">After Your Trip</div>
                <div class="tip-text">Stop by Sunrise Restaurant for great food!</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <div class="footer-text" id="status">Waiting for data...</div>
        <div class="footer-text">Made with ‚ù§Ô∏è by Sunrise Family Restaurant</div>
      </div>
    </div>
  </div>

  <script>
    // Constants
    const MENU_DURATION = 120000; // 2 minutes
    const DASHBOARD_DURATION = 60000; // 1 minute
    const REFRESH_MS = 300000; // 5 minutes
    const LAT = 36.625, LON = -93.875;
    const WEATHER_API = "https://api.open-meteo.com/v1/forecast";
    const USGS_API = "https://waterservices.usgs.gov/nwis/iv/?format=json&sites=07050152&parameterCd=00065,00060&siteStatus=all";

    // Clock
    function tickClock() {
      const now = new Date();
      const timeStr = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      const dateStr = now.toLocaleDateString([], { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' });
      
      const menuTime = document.getElementById('timeMenu');
      const menuDate = document.getElementById('dateMenu');
      const dashTime = document.getElementById('timeDash');
      const dashDate = document.getElementById('dateDash');
      
      if (menuTime) menuTime.textContent = timeStr;
      if (menuDate) menuDate.textContent = dateStr;
      if (dashTime) dashTime.textContent = timeStr;
      if (dashDate) dashDate.textContent = dateStr;
    }
    tickClock();
    setInterval(tickClock, 1000);

    // Section switching with absolute positioning approach
    let currentSection = 'menu';
    let switchTimeout = null;
    
    function switchSection() {
      const menuSection = document.getElementById('menuSection');
      const dashSection = document.getElementById('dashboardSection');
      
      console.log('Switching from:', currentSection);
      
      if (currentSection === 'menu') {
        // Switch to dashboard
        menuSection.classList.remove('active');
        dashSection.classList.add('active');
        currentSection = 'dashboard';
        console.log('Now showing: dashboard');
        switchTimeout = setTimeout(switchSection, DASHBOARD_DURATION);
      } else {
        // Switch to menu
        dashSection.classList.remove('active');
        menuSection.classList.add('active');
        currentSection = 'menu';
        console.log('Now showing: menu');
        switchTimeout = setTimeout(switchSection, MENU_DURATION);
      }
    }

    // Start the first switch
    console.log('Starting with menu for 2 minutes');
    switchTimeout = setTimeout(switchSection, MENU_DURATION);

    // Countdown timer
    let countdownInterval;
    function startCountdown() {
      let timeLeft = currentSection === 'menu' ? MENU_DURATION : DASHBOARD_DURATION;
      
      if (countdownInterval) clearInterval(countdownInterval);
      
      countdownInterval = setInterval(() => {
        timeLeft -= 1000;
        if (timeLeft <= 0) {
          clearInterval(countdownInterval);
          return;
        }
        
        const minutes = Math.floor(timeLeft / 60000);
        const seconds = Math.floor((timeLeft % 60000) / 1000);
        const countdownEl = document.getElementById('countdown');
        if (countdownEl) {
          countdownEl.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
      }, 1000);
    }
    startCountdown();

    // Fetch data
    async function fetchData() {
      const statusEl = document.getElementById('status');
      if (statusEl) statusEl.textContent = 'Fetching data...';
      
      try {
        // Weather
        const wRes = await fetch(`${WEATHER_API}?latitude=${LAT}&longitude=${LON}&current_weather=true&daily=sunrise,sunset&timezone=auto&temperature_unit=fahrenheit`);
        const wData = await wRes.json();
        const cur = wData.current_weather;
        const daily = wData.daily;
        
        document.getElementById('airTemp').textContent = Math.round(cur.temperature) + '¬∞F';
        document.getElementById('sunrise').textContent = new Date(daily.sunrise[0]).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        document.getElementById('sunset').textContent = new Date(daily.sunset[0]).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

        // USGS
        const uRes = await fetch(USGS_API);
        const uData = await uRes.json();
        const timeSeries = uData.value.timeSeries;
        let level = '--', flow = '--';
        
        timeSeries.forEach(ts => {
          const code = ts.variable.variableCode[0].value;
          const val = ts.values[0].value[0].value;
          if (code === '00065') level = parseFloat(val).toFixed(2);
          if (code === '00060') flow = Math.round(parseFloat(val));
        });
        
        document.getElementById('waterLevel').textContent = level + ' ft';
        document.getElementById('discharge').textContent = flow + ' cfs';
        document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

        updateConditions(cur.temperature);
        if (statusEl) statusEl.textContent = 'Updated at ' + new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      } catch (err) {
        console.error('Error:', err);
        if (statusEl) statusEl.textContent = 'Error loading data - will retry';
      }
    }

    function updateConditions(tempF) {
      const fE = document.getElementById('fishEmoji'),
            fT = document.getElementById('fishTitle'),
            fD = document.getElementById('fishDesc');
      const sE = document.getElementById('swimEmoji'),
            sT = document.getElementById('swimTitle'),
            sD = document.getElementById('swimDesc');
      const pE = document.getElementById('paddleEmoji'),
            pT = document.getElementById('paddleTitle'),
            pD = document.getElementById('paddleDesc');

      // Fishing
      if (tempF >= 50 && tempF <= 68) {
        fT.textContent = 'Fishing ‚Äì Great';
        fD.textContent = 'Trout very active';
        fE.textContent = 'üé£';
      } else if ((tempF >= 40 && tempF < 50) || (tempF > 68 && tempF <= 75)) {
        fT.textContent = 'Fishing ‚Äì Good';
        fD.textContent = 'Moderate activity';
        fE.textContent = 'üëç';
      } else {
        fT.textContent = 'Fishing ‚Äì Slow';
        fD.textContent = 'Less active';
        fE.textContent = '‚ö†Ô∏è';
      }

      // Swimming
      if (tempF >= 68) {
        sT.textContent = 'Swimming ‚Äì Good';
        sD.textContent = 'Water comfortable';
        sE.textContent = 'üèä';
      } else if (tempF >= 60) {
        sT.textContent = 'Swimming ‚Äì Cool';
        sD.textContent = 'Water is chilly';
        sE.textContent = 'ü§ø';
      } else {
        sT.textContent = 'Swimming ‚Äì Cold';
        sD.textContent = 'Too cold';
        sE.textContent = '‚ùÑÔ∏è';
      }

      // Kayaking
      if (tempF >= 50) {
        pT.textContent = 'Kayaking ‚Äì Good';
        pD.textContent = 'Safe conditions';
        pE.textContent = 'üõ∂';
      } else {
        pT.textContent = 'Kayaking ‚Äì Caution';
        pD.textContent = 'Cold weather';
        pE.textContent = '‚ö†Ô∏è';
      }
    }

    fetchData();
    setInterval(fetchData, REFRESH_MS);
  </script>
</body>
</html>